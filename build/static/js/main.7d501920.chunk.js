(this["webpackJsonpauction-project"]=this["webpackJsonpauction-project"]||[]).push([[0],{123:function(e,t,n){e.exports={mainDiv:"AuctionView_mainDiv__3WwSN",image:"AuctionView_image__9Pznx"}},168:function(e,t,n){},169:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(22),s=n.n(r),o=n(62),i=n(60),u=n(145),l=(n(167),n(168),n(47)),j=(n(169),n(25)),b=n(49),d=n(266),p=n(270),h=n(271),O=n(272),x=n(273),m=n(274),f=n(275),g=n(276),v=n(26),y=n(6),S=function(e){var t=e.user,n=Object(v.h)(),r=Object(c.useState)(!0),s=Object(j.a)(r,2),o=s[0],i=s[1];return Object(y.jsxs)("div",{style:{width:"200px",position:"fixed",zIndex:200},children:[Object(y.jsx)(b.a,{type:"primary",onClick:function(){i((function(e){return!e}))},style:{marginBottom:16},children:a.a.createElement(o?p.a:h.a)}),Object(y.jsxs)(d.a,{defaultSelectedKeys:["/"===n.pathname[n.pathname.length-1]&&n.pathname.length>1?n.pathname.substr(0,n.pathname.length-1):n.pathname],defaultOpenKeys:["sub1"],mode:"inline",theme:"dark",inlineCollapsed:o,children:[Object(y.jsx)(d.a.Item,{icon:Object(y.jsx)(O.a,{}),children:Object(y.jsx)(l.b,{to:"/auctions",children:"Auctions"})},"/"),!t&&Object(y.jsx)(d.a.Item,{icon:Object(y.jsx)(x.a,{}),children:Object(y.jsx)(l.b,{to:"/auth",children:"Login/Sign up"})},"/auth"),t&&Object(y.jsx)(d.a.Item,{icon:Object(y.jsx)(m.a,{}),children:Object(y.jsx)(l.b,{to:"/create-auction",children:"Create Auction"})},"/create-auction"),t&&Object(y.jsx)(d.a.Item,{icon:Object(y.jsx)(f.a,{}),children:Object(y.jsx)(l.b,{to:"/your-auctions",children:"Your Auctions"})},"/your-auctions"),t&&Object(y.jsx)(d.a.Item,{icon:Object(y.jsx)(g.a,{}),onClick:e.logoutHandler,children:"Logout"},"/logout")]})]})},w=n(29),C=n.n(w),k=n(40),I=n(30),A=n(103),N=n.n(A),P=function(){return{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},U=N.a.create({baseURL:"https://tqkttg5ge5.execute-api.ap-south-1.amazonaws.com/dev"}),B=N.a.create({baseURL:"https://8f9gf9hvpa.execute-api.ap-south-1.amazonaws.com/dev"});B.interceptors.request.use((function(e){return e=Object(I.a)(Object(I.a)({},e),{},{headers:Object(I.a)(Object(I.a)({},e.headers),P())})}),(function(e){return Promise.reject(e)}));var E=n(264),F=n(77),L=n(45),D=n.p+"static/media/no_image.1287f47e.jpg",W=function(e){var t=e[0].toUpperCase()+e.substr(1,e.length>15?15:e.length-1);return t.length<=15?t:t+"..."},R=D,T=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(){return n(new Error("Your file is corrupted!"))}}))},_="wss://gwm8skmuc4.execute-api.ap-south-1.amazonaws.com/dev",q=function(e){var t=e.auction,n=Object(v.g)();return Object(y.jsxs)(E.a,{bordered:!0,style:{maxWidth:"350px",marginBottom:"40px",boxShadow:"1px 1px 4px black"},cover:Object(y.jsx)("img",{alt:"Item Image",src:t.pictureUrl||R,height:225,width:300,style:{border:"1px solid black"}}),children:[Object(y.jsxs)(F.a,{children:[Object(y.jsx)(L.a,{span:12,children:Object(y.jsxs)("h3",{children:[" ",W(t.title)]})}),Object(y.jsx)(L.a,{span:2}),!e.yourAuction&&Object(y.jsxs)(L.a,{span:10,children:["Min. Amount: ",Object(y.jsxs)("strong",{children:["\u20b9 ",t.highestBid.amount]})]}),e.yourAuction&&Object(y.jsxs)(L.a,{span:10,children:["Sold Price: ",Object(y.jsxs)("strong",{children:["\u20b9",t.highestBid.amount]})]})]}),!e.yourAuction&&Object(y.jsx)(b.a,{type:"danger",onClick:function(){return n.push("/auction/".concat(t.id))},children:"View Details"}),e.yourAuction&&Object(y.jsxs)(F.a,{children:[Object(y.jsxs)(L.a,{span:12,children:["Status: ",Object(y.jsx)("strong",{children:t.highestBid.bidder?"SOLD":"NOT SOLD"})]}),Object(y.jsx)(L.a,{span:2}),"OPEN"===t.status&&Object(y.jsx)(L.a,{span:10,children:Object(y.jsx)(b.a,{type:"danger",onClick:e.onClose,loading:e.btnLoading,children:"Close Now!"})}),"OPEN"!==t.status&&Object(y.jsx)(L.a,{span:10,children:Object(y.jsx)(b.a,{type:"primary",onClick:e.onClose,disabled:!0,children:"Closed"})})]})]})},z=n(269),M=n(262),J=function(){return Object(y.jsx)(z.b,{size:"large",style:{textAlign:"center",display:"block"},children:Object(y.jsx)(M.a,{size:"large"})})},Y=n(268),H=function(e){return Object(y.jsx)(Y.a,{title:"Basic Modal",visible:!0,onCancel:e.onCancel,footer:[],children:e.children})},V=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),o=Object(j.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(null),b=Object(j.a)(l,2),d=b[0],p=b[1],h=Object(c.useState)(!1),O=Object(j.a)(h,2),x=O[0],m=O[1],f=Object(c.useRef)(null),g=Object(c.useCallback)((function(){f.current.send(JSON.stringify({action:"createConnection",data:{path:"/"}}))}),[]),v=function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("/auctions?status=OPEN");case 3:t=e.sent,console.log(t.data),r(t.data),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),p("Something Went Wrong");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return f.current=new WebSocket(_),f.current.onopen=g,f.current.onmessage=function(e){console.log(e),"AMOUNT_UPDATED"===JSON.parse(e.data).type&&v()},function(){f.current.close()}}),[]),Object(c.useEffect)((function(){v()}),[]);return i?Object(y.jsx)(J,{}):d?Object(y.jsx)("h3",{children:"Something went Wrong"}):a.length<=0?Object(y.jsx)("h3",{children:"No Open Auctions right Now..."}):Object(y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},children:[x&&Object(y.jsx)(H,{onCancel:function(){m(!1)}}),a.map((function(e){return Object(y.jsx)(q,{auction:e},e.id)}))]})},G=n(157),K=n(265),Q=n(267),X=n(123),Z=n.n(X),$=!1,ee=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),o=Object(j.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(0),d=Object(j.a)(l,2),p=d[0],h=d[1],O=Object(c.useRef)(null),x=Object(c.useState)(!1),m=Object(j.a)(x,2),f=m[0],g=m[1],S=Object(v.i)().id,w=function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("/auction/".concat(S));case 3:t=e.sent,r(t.data),h(Math.floor(t.data.highestBid.amount+1)),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),u(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w()}),[]);var I=Object(c.useCallback)((function(){O.current.send(JSON.stringify({action:"createConnection",data:{path:"/auction/".concat(S)}})),console.log("OPENED"),$=!0}),[]),A=Object(c.useCallback)((function(e){var t=JSON.parse(e.data);"BID_SUCCESSFUL"===t.type?(G.a.success({message:"Your bid is successfull!"}),g(!1)):"AMOUNT_UPDATED"===t.type?(console.log(t),r(t.auction)):"BID_UNSUCCESSFUL"===t.type&&(G.a.error({message:"Unauthorized"===t.message?"Please Login first!":t.message}),g(!1))}),[]);Object(c.useEffect)((function(){return O.current=new WebSocket(_),O.current.onopen=I,O.current.onmessage=A,O.current.onclose=function(){G.a.error({message:"You are not connected to Internet!"}),$=!1,g(!1)},function(){O.current.onclose=function(){$=!1},O.current.close()}}),[]);var N,P=Object(y.jsx)(J,{});return i||a?!i&&a&&(P=Object(y.jsxs)("div",{className:Z.a.mainDiv,children:[Object(y.jsx)("img",{src:a.pictureUrl||R,className:Z.a.image}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:Object(y.jsx)("i",{children:(N=a.title,N[0].toUpperCase()+N.substr(1,N.length-1))})}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Current Bid:"})," ",Object(y.jsxs)("i",{children:["\u20b9 ",a.highestBid.amount]})]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Highest Bidder: "})," ",Object(y.jsxs)("i",{children:[" ",a.highestBid.bidder||"No bidders yet!"]})]}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(p),g(!0),function(e){$?O.current.send(JSON.stringify({action:"placeBid",data:{token:localStorage.getItem("token"),auctionId:S,amount:e,path:"/auction/".concat(S)}})):(O.current=new WebSocket(_),O.current.onmessage=A,O.current.onopen=function(){I(),O.current.send(JSON.stringify({action:"placeBid",data:{token:localStorage.getItem("token"),auctionId:S,amount:e,path:"/auction/".concat(S)}}))},O.current.onclose=function(){G.a.error({message:"You are not connected to Internet!"}),$=!1,g(!1)})}(p)},children:[Object(y.jsx)(K.a.Item,{label:"Your Bid: ",labelAlign:"left",children:Object(y.jsx)(Q.a,{type:"number",min:Math.floor(a.highestBid.amount+1),value:p,onChange:function(e){return t=e.target.value,void h(1*t);var t}})}),Object(y.jsx)(b.a,{htmlType:"submit",type:"p",loading:f,children:"Bid Now!"})]})]})]})):P=Object(y.jsx)("h2",{children:"Something Went Wrong!"}),P},te=n(263),ne={labelCol:{span:4},wrapperCol:{span:16}},ce={wrapperCol:{offset:4,span:16}},ae=function(e){var t=K.a.useForm(),n=Object(j.a)(t,1)[0],a=Object(c.useState)(!1),r=Object(j.a)(a,2),s=r[0],o=r[1],i=function(){var e=Object(k.a)(C.a.mark((function e(t){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,T(t.upload.file.originFileObj);case 4:return n=e.sent,console.log(n),e.next=8,B.post("/auction",{title:t.title,minimumPrice:Math.round(100*t.minimumPrice)/100});case 8:return c=e.sent,e.next=11,B.post("/uploadAuctionItemPicture/".concat(c.data.id),{base64String:n});case 11:G.a.success({message:"Item Added Successfully!"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),G.a.error({message:e.t0.response?e.t0.response.data:"Something went wrong!"});case 17:o(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(K.a,Object(I.a)(Object(I.a)({},ne),{},{name:"basic",onFinish:i,onFinishFailed:function(e){console.log("Failed:",e)},form:n,children:[Object(y.jsxs)(F.a,{children:[Object(y.jsx)(L.a,{span:2}),Object(y.jsx)(L.a,{span:22,children:Object(y.jsx)("h1",{children:Object(y.jsx)("i",{children:"Register an item to sold"})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(K.a.Item,{label:"Item Name",name:"title",rules:[{required:!0,message:"Please input your item name!"}],children:Object(y.jsx)(Q.a,{})}),Object(y.jsx)(K.a.Item,{label:"Base Price",name:"minimumPrice",rules:[{required:!0,message:"Please input your base price!"}],children:Object(y.jsx)(Q.a,{type:"number"})}),Object(y.jsx)(K.a.Item,{name:"upload",label:"Upload Picture",rules:[{required:!0}],children:Object(y.jsx)(te.a,{name:"logo",maxCount:1,accept:"image/*",customRequest:function(e){e.onSuccess()},showUploadList:{showRemoveIcon:!1},children:Object(y.jsx)(b.a,{children:"Click to upload"})})}),Object(y.jsx)(K.a.Item,Object(I.a)(Object(I.a)({},ce),{},{children:Object(y.jsx)(b.a,{type:"primary",htmlType:"submit",loading:s,children:"Submit"})}))]}))},re=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(j.a)(r,2),o=s[0],i=s[1],u=Object(c.useState)(null),l=Object(j.a)(u,2),b=l[0],d=l[1],p=Object(c.useState)(!1),h=Object(j.a)(p,2),O=h[0],x=h[1],m=function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("/getYourAuctions");case 3:t=e.sent,console.log(t.data),a(t.data),i(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),i(!1),d("Something Went Wrong");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(k.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,B.get("/auction/".concat(t,"/close"));case 4:n=e.sent,console.log(n.data),G.a.success({message:"Auction successfully closed!"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),G.a.error({message:"Auction not closed!"});case 12:return e.next=14,m();case 14:x(!1);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m()}),[]),o?Object(y.jsx)(J,{}):b?Object(y.jsx)("h3",{children:"Something went Wrong"}):n.length<=0?Object(y.jsx)("h3",{children:"You haven't created any auctions!"}):Object(y.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},children:n.map((function(e){return Object(y.jsx)(q,{auction:e,yourAuction:!0,btnLoading:O,onClose:function(){f(e.id)}},e.id)}))})},se="SET_AUTH",oe=function(){return function(){var e=Object(k.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.get("/private",{headers:Object(I.a)({},P())});case 3:return n=e.sent,console.log(n),e.abrupt("return",t({type:se,user:n.data}));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",t({type:se,user:null}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},ie={labelCol:{span:4},wrapperCol:{span:16}},ue={wrapperCol:{offset:4,span:16}},le=function(){var e=K.a.useForm(),t=Object(j.a)(e,1)[0],n=Object(i.b)();return Object(y.jsxs)(K.a,Object(I.a)(Object(I.a)({},ie),{},{name:"basic",onFinish:function(e){var t;console.log("Success:",e),n((t=e,function(){var e=Object(k.a)(C.a.mark((function e(n){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.post("/login",t);case 3:return c=e.sent,console.log(c),localStorage.setItem("token",c.data.token),e.abrupt("return",n(oe()));case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},onFinishFailed:function(e){console.log("Failed:",e)},form:t,children:[Object(y.jsxs)(F.a,{children:[Object(y.jsx)(L.a,{span:2}),Object(y.jsx)(L.a,{span:22,children:Object(y.jsx)("h1",{children:Object(y.jsx)("i",{children:"LOGIN/SIGNUP FORM"})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(K.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}],children:Object(y.jsx)(Q.a,{})}),Object(y.jsx)(K.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(y.jsx)(Q.a,{})}),Object(y.jsx)(K.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(Q.a.Password,{})}),Object(y.jsx)(K.a.Item,Object(I.a)(Object(I.a)({},ue),{},{children:Object(y.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))},je=function(e){var t=e.user;return Object(y.jsxs)(v.d,{children:[Object(y.jsx)(v.b,{path:"/",exact:!0,component:V}),Object(y.jsx)(v.b,{path:"/auction/:id",exact:!0,component:ee}),t&&Object(y.jsx)(v.b,{path:"/create-auction",exact:!0,component:ae}),t&&Object(y.jsx)(v.b,{path:"/your-auctions",exact:!0,component:re}),!t&&Object(y.jsx)(v.b,{path:"/auth",exact:!0,component:le}),Object(y.jsx)(v.a,{path:"*",exact:!0,to:"/"})]})},be=function(){var e=Object(i.c)((function(e){return{authUser:e.authReducer.user,appLoading:e.authReducer.loading}})),t=e.authUser,n=e.appLoading,a=Object(i.b)();Object(c.useEffect)((function(){a(oe())}),[]);return Object(y.jsx)(l.a,{children:!n&&Object(y.jsxs)("div",{className:"App",style:{marginTop:"20px"},children:[Object(y.jsx)(S,{user:t,logoutHandler:function(){a((function(e){return localStorage.clear(),e(oe())}))}}),Object(y.jsx)("div",{style:{marginLeft:"100px",marginRight:"20px"},children:Object(y.jsx)(je,{user:t})})]})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},pe={user:null,loading:!0},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return{loading:!1,user:t.user};default:return e}},Oe=void 0;Oe=Oe||o.d;var xe=Object(o.c)({authReducer:he}),me=Object(o.e)(xe,Oe(Object(o.a)(u.a)));s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(i.a,{store:me,children:Object(y.jsx)(be,{})})}),document.getElementById("root")),de()}},[[259,1,2]]]);
//# sourceMappingURL=main.7d501920.chunk.js.map